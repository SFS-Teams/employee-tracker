<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Employee Geo-Tracking</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    label, select, button { display: block; margin-top: 10px; }
  </style>
</head>
<body>

  <h2>Employee Location Tracker</h2>

  <label for="empSelect">Select Employee ID</label>
  <select id="empSelect"></select>

  <button onclick="submitLocation()">Submit Location</button>

  <script>
    const employeeList = [];
    for (let i = 1; i <= 90; i++) {
      const num = String(i).padStart(6, '0'); // e.g., 000001
      const empId = `SFS${num}`;              // SFS900001
      const email = `emp${i}@example.com`;    // emp1@example.com
      employeeList.push({ id: empId, email: email });
    }

    const select = document.getElementById("empSelect");

    employeeList.forEach(emp => {
      const option = document.createElement("option");
      option.value = emp.id;
      option.text = emp.id; // Only show Employee ID in dropdown
      select.appendChild(option);
    });

    function submitLocation() {
      const selectedId = document.getElementById("empSelect").value;
      const selectedEmp = employeeList.find(emp => emp.id === selectedId);

      if (!selectedEmp) {
        alert("Invalid employee selected.");
        return;
      }

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(position => {
          const lat = position.coords.latitude;
          const lng = position.coords.longitude;

          fetch('https://script.google.com/macros/s/YOUR_DEPLOYED_SCRIPT_ID/exec', {
            method: 'POST',
            body: JSON.stringify({
              id: selectedEmp.id,
              email: selectedEmp.email,
              lat: lat,
              lng: lng
            }),
            headers: {
              'Content-Type': 'application/json'
            }
          })
          .then(res => res.text())
          .then(response => {
            alert("Location Submitted: " + response);
          });
        }, () => {
          alert("Geolocation failed.");
        });
      } else {
        alert("Geolocation not supported.");
      }
    }
  </script>

</body>
</html>
