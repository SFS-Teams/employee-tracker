<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Employee Geo-Tracking</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    label, select, button { display: block; margin-top: 10px; }
  </style>
</head>
<body>

  <h2>Employee Location Tracker</h2>

  <label for="empSelect">Select Employee</label>
  <select id="empSelect"></select>

  <button onclick="submitLocation()">Submit Location</button>

  <script>
    // Generate 90 employees: SFS900001 to SFS900090
    const dropdown = document.getElementById("empSelect");

    for (let i = 1; i <= 90; i++) {
      const num = String(i).padStart(6, '0'); // 000001 to 000090
      const empId = `SFS${900000 + i}`; // SFS900001 to SFS900090
      const email = `emp${i}@example.com`; // Sample email

      const option = document.createElement("option");
      option.value = JSON.stringify({ id: empId, email: email });
      option.text = `${empId} (${email})`;
      dropdown.appendChild(option);
    }

    function submitLocation() {
      const selected = JSON.parse(document.getElementById("empSelect").value);

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(position => {
          const lat = position.coords.latitude;
          const lng = position.coords.longitude;

          // Send data to Apps Script endpoint
          fetch('https://script.google.com/macros/s/YOUR_DEPLOYED_SCRIPT_ID/exec', {
            method: 'POST',
            body: JSON.stringify({
              id: selected.id,
              email: selected.email,
              lat: lat,
              lng: lng
            }),
            headers: {
              'Content-Type': 'application/json'
            }
          })
          .then(res => res.text())
          .then(response => {
            alert("Location Submitted: " + response);
          });
        }, () => {
          alert("Geolocation failed.");
        });
      } else {
        alert("Geolocation not supported.");
      }
    }
  </script>

</body>
</html>
